<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<script>
		//网上资源------------------


		//对应js设计模式的惰性单例
		var i = function(){
			// alert("单例模式")
		}
		var i;
		i();
		console.log(i);

		//实现单例模式
		var arr = ["hello","world"]
		var single = (function(){
			var unique = null;
			function getUnique(v){
				if(!unique){
					console.log("first")
					unique = new Construct(v);
				}
				return unique;
			}
			function Construct(v){
				arr.push(v)
				console.log(arr)
			}
			return {
				getUnique:getUnique
			}
		})()

		single.getUnique("hello")

		function fn(v){
			arr.push(v)
			console.log(arr)
		}
		fn("hello")
		fn("hello")

		single.getUnique("world")

		console.log(single.getUnique("world"));//直接返回unique之前实例化的对象，没有重新进行实例化Construct函数类
		//----------------------------------------------------------


		//js设计模式 单例模式
		var yu = {
			g:function(){
				console.log("hello")
			},
			b:function(){
				this.g()
			}
		}

		// 可以创建静态变量
		var Count = (function(){
			var conf = {
				COUNT:10,
				NUMBER:20
			}
			return {
				get:function(name){
					return conf[name]?conf[name]:null
				}
			}
		})()

		console.log(Count.get("COUNT"))
		yu.b()




		/*博客园*/
		function single(){
			var mask;
			return function(){
				return mask||(mask = function(){document.body.appendChild(document.createElement("div")})
			}
		}

		/*改进 桥接模式*/
		//创建唯一实例的方法分离出来
		function singleTon(fn){
			var result;
			return function(){
				return result||result = fn.apply(this,arguments)
			}
		}
		singleTon(function(){
			document.body.appendChild(document.createElement("div")
		})
	</script>
</body>
</html>